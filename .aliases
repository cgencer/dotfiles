# Navigation
alias ..="cd .."
alias cd..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."

# Shortcuts
alias g="git"
alias commit='git add $(git ls-files -o --exclude-standard) && git add -p && git commit -m'
alias subl="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl"
alias sublime="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl"
alias finder="open ."
alias python3="python3 -u"
alias diff="diff -U3"
alias hosts="subl /etc/hosts"
alias aliases="subl ~/.aliases"

# PHP stuff
alias serve="php -S localhost:3000"
alias art="php artisan"
alias behat="behat --stop-on-failure"
alias x="XDEBUG_CONFIG='idekey=PHPSTORM'"
alias debug="XDEBUG_CONFIG='idekey=PHPSTORM'"
alias xphp="XDEBUG_CONFIG='idekey=PHPSTORM' php"
alias lockfix="rm composer.lock && composer update --ignore-platform-reqs && git add composer.lock && git rebase --continue"
alias climb="composer outdated --outdated --direct"
alias storm="open -a /Applications/PhpStorm.app"
alias cu="composer update"
alias ci="composer install"
alias c="composer"
alias psr2="php-cs-fixer fix . --diff --config=/Users/Jens/.php_cs"

# Network stuff
alias airport="/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport"
alias flushdns="dscacheutil -flushcache && echo \"DNS cache cleared\""

# Docker stuff
alias docker-up="cd ~/Docker/Personal && docker-compose build && docker-compose up --remove-orphans -d"
alias docker-clean="docker images -q -a | xargs docker rmi"
docker-ssh() {
	docker exec -i -t $1 /bin/bash
}

# OS X has no `md5sum`, so use `md5` as a fallback
command -v md5sum > /dev/null || alias md5sum="md5"

# OS X has no `sha1sum`, so use `shasum` as a fallback
command -v sha1sum > /dev/null || alias sha1sum="shasum"

# Recursively delete `.DS_Store` files
alias dotclean="find . -type f -name '*.DS_Store' -ls -delete"

# Generate a random string
random() {
	openssl rand -base64 512 | tr -dc 'a-zA-Z0-9' | fold -w ${1:-32} | head -n 1
}

# Get string length of first argument
strlen() {
	echo ${#1}
}

# Get daily commits
daily() {
	for D in ~/Projects/*/.git; do
		git --git-dir=$D log --author "$(git config user.name)" --since="00:00" --pretty=tformat:" - %s" | cat
	done
}

# Base64 decode strings
base64_decode() {
	echo $1 | base64 --decode
}

# Quickly transfer file
transfer() {
	tmpfile=$( mktemp -t transferXXX )
	curl --progress-bar --upload-file $1 https://transfer.sh/$(basename $1) >> $tmpfile;
	cat $tmpfile;
	rm -f $tmpfile;
}

# Prefer vendor phpunit
phpunit() {
	if  [ -e './vendor/bin/phpunit' ]; then
		./vendor/bin/phpunit
	else
		~/.composer/vendor/bin/phpunit
	fi
}
